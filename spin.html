<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Spin | ShopUniverses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS global -->
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/css/theme.css">

    <!-- CSS del Spin -->
    <link rel="stylesheet" href="./assets/css/spin.css">
    </head>

    <body>

    <!-- ================= NAV ================= -->
    <nav>
        <a href="./index.html">Inicio</a>
        <a href="./catalogo.html">Cat치logo</a>
        <a href="./carrito.html">Carrito</a>
    </nav>

    <!-- ================= HEADER ================= -->
    <header class="container section">
        <h1>游꿔 Spin ShopUniverses</h1>
        <p>Gira la ruleta est치ndar o premium y gana productos.</p>
    </header>

    <!-- ================= MAIN ================= -->
    <main class="container spin">

        <div class="spin__layout">

        <!-- ===== RULETAS ===== -->
        <div class="spin-wheels">

            <div class="spin-wheel spin-wheel--standard">
            <span>Est치ndar</span>
            </div>

            <div class="spin-wheel spin-wheel--premium">
            <span>Premium</span>
            </div>

        </div>

        <!-- ===== PANEL DE CONTROL ===== -->
        <aside class="spin-panel">

            <!-- -------- EST츼NDAR -------- -->
            <div class="spin-panel__section">
            <h3 class="spin-panel__title">Ruleta Est치ndar</h3>

            <div class="spin-panel__counter">
                Giros restantes: <strong id="girosEstandar">5</strong>
            </div>

            <button onclick="iniciar('estandar')">
                Iniciar est치ndar ($25.000)
            </button>

            <button onclick="girar()">
                Girar est치ndar
            </button>
            </div>

            <hr>

            <!-- -------- PREMIUM -------- -->
            <div class="spin-panel__section">
            <h3 class="spin-panel__title">Ruleta Premium</h3>

            <div class="spin-panel__counter">
                Giros restantes: <strong id="girosPremium">1</strong>
            </div>

            <button onclick="iniciar('premium')">
                Iniciar premium ($8.000)
            </button>

            <button onclick="girar()">
                Girar premium
            </button>
            </div>

            <hr>

            <!-- -------- LISTA DE PRODUCTOS POSIBLES -------- -->
            <button onclick="toggleLista()">Ver productos posibles</button>

            <div id="lista-productos" class="spin-list is-hidden">
            <!-- Se llena din치micamente desde JS -->
            </div>

        </aside>
        </div>

        <!-- ===== PREMIOS OBTENIDOS (RESUMEN) ===== -->
        <section class="spin-rewards">
        <h3>游꾸 Premios obtenidos</h3>
        <ul id="productos">
            <!-- Se renderizan premios est치ndar y premium -->
        </ul>
        </section>

    </main>

    <!-- ================= MODAL ================= -->
    <div id="modalPremios" class="spin-modal">
        <div class="spin-modal__content">
        <h2>游꾸 Premios obtenidos</h2>

        <ul id="listaPendientes" class="spin-modal__list">
            <!-- Premios temporales -->
        </ul>

        <div class="spin-modal__actions">
            <button onclick="aceptar()">Aceptar premios</button>
            <button onclick="repetir()">Volver a girar</button>
        </div>
        </div>
    </div>

    <!-- ================= SCRIPTS ================= -->
    <script src="./assets/js/data.js"></script>
    <script src="./assets/js/carrito.js"></script>
    <script src="./assets/js/spin.js"></script>

    <!-- ================= UI HELPERS ================= -->
    <script>
        /* Toggle lista de productos posibles */
        function toggleLista() {
        const l = document.getElementById("lista-productos");
        l.classList.toggle("is-hidden");

        if (!l.classList.contains("is-hidden")) {
            renderLista();
        }
        }

        /* Render lista de productos (est치ndar + premium) */
        function renderLista() {
        const cont = document.getElementById("lista-productos");
        cont.innerHTML = "";

        const productos = [
            ...getProductosSpinEstandar(),
            ...getProductosSpinPremium()
        ];

        productos.forEach(p => {
            if (obtenerStock()[p.id] <= 0) return;

            const div = document.createElement("div");
            div.className = "spin-list__item";
            div.innerHTML = `
            <strong>${p.nombre}</strong>
            <small>Stock: ${obtenerStock()[p.id]}</small>
            `;
            cont.appendChild(div);
        });
        }
    </script>

    </body>
</html>
